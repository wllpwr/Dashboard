<html>
<head>
  <title>Weather</title>
</head>
<style>
    body {
      background-color:white;
    }
  </style>
<body>
<label>Zip Code:</label>
<input id="zipCode" type="text" value=""><br><br>
<!-- Rounded switch -->
<label>Celsius or Fahrenheit:</label><br>
<input type="radio" id="Celsius" name="tempType" value="Celsius">
<label>Celsius</label><br>
<input type="radio" id="Fahrenheit" name="tempType" value="Fahrenheit">
<label>Fahrenheit</label><br>
</body>


<script type="text/javascript">
  window.onload = function getCurrentSettings() {
    var jsonString = Android.readJson(fileName)

    var jsonObj = JSON.parse(jsonString)

    var zip = document.getElementById("zipCode")
    var celsius = document.getElementById("Celsius")
    var fahrenheit = document.getElementById("Fahrenheit")

    zip.value = jsonObj.zipCode

    if (jsonObj.CelsiusOrFahrenheit == "Celsius") {
      celsius.checked = true
    } else {
      fahrenheit.checked = true
    }
  }

  var fileName = "weatherSettings.json"

  function sendMessage(fileName, jsonString) {
      Android.createAndWriteToJson(fileName, jsonString);
  }

  function updateFromNative(){
    var zipCode = document.getElementById("zipCode").value
    var celsiusOrFahrenheit = document.querySelector('input[name="tempType"]:checked').value;

    console.log(zipCode)
    console.log(celsiusOrFahrenheit)

    var jsonString = `{"zipCode": "${zipCode}", "CelsiusOrFahrenheit": "${celsiusOrFahrenheit}"}`
    var jsonString2 = "{\"zipCode\": \"" + zipCode +"\", \"CelsiusOrFahrenheit\": \"" + celsiusOrFahrenheit + "\"}"

    sendMessage(fileName, jsonString2)
  }
</script>

</html>
